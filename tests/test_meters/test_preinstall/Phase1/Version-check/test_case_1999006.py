"""
REGENRATE: True
Set REGENERATE to False if you modify this comment
section to inhibit re-writing this section
===================================================================================================
Test Plan Path : templates/AppServ-TestRepository/Phase1
Test Case Link : https://dev.azure.com/itron/SoftwareProducts/_workitems/edit/1999006
===================================================================================================
Test Case      : 1999006
System.History : None
Steps:
===================================================================================================
Step 1 - 
Check if Application Services is running on the Meter.

Step 2 -
RESULT:SUCCESS:ILID_DATASERVER_APPSERV_FW_VERSION:String=1.9.409.0 



Step 3 - 
Upgrade the AppService (latest say 1.9.410) via FDM or Improv.



Step 4 - 
Check the newly installed AppService version from the lid. 

TransactionProcess --event="MUSE_V1;ReadLid;ILID_DATASERVER_APPSERV_FW_VERSION;"

Step 5 - 
RESULT:SUCCESS:ILID_DATASERVER_APPSERV_FW_VERSION:String=1.9.410.0
Upgraded AppService version should be available


===================================================================================================


"""
import pytest
# AUTOGENERATED Test Case 1999006

# @pytest.mark.skip(reason="TODO: unimplemented test case")
@pytest.mark.regress_nightly
@pytest.mark.slow1020 # test takes 10 to 20 minutes
#@pytest.mark.regress_smoke
@pytest.mark.suite_id("1990124")
@pytest.mark.test_case("1999006")
def test_case(preinstalled_meter, logger,di_package_2k,di_version_2k,di_version):
        logger.trace("Executing Test Case 1999006 - ApplicationServices component version number is updateable via FWDL process")
        logger.trace('Step 1')
        exiting_appServ_version=preinstalled_meter.command('TransactionProcess --event="MUSE_V1;ReadLid;ILID_DATASERVER_APPSERV_FW_VERSION"')       
        logger.trace('Step 2')
        output1=exiting_appServ_version[0].split("=")
        assert output1[1] ==di_version,"appserve is not installed or not running "      
        logger.trace('Step 3')
        preinstalled_meter.install(file=di_package_2k)  
        logger.trace('Step 4')
        upgrade_appServe_version=preinstalled_meter.command('TransactionProcess --event="MUSE_V1;ReadLid;ILID_DATASERVER_APPSERV_FW_VERSION;"')    
        logger.trace('Step 5')  
        output2=upgrade_appServe_version[0].split("=")
        assert output2[1] ==di_version_2k ,"appserve is not Upgrade successfully "
        


