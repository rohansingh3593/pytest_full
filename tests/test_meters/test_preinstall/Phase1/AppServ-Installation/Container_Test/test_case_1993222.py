"""
REGENRATE: True
Set REGENERATE to False if you modify this comment
section to inhibit re-writing this section
===================================================================================================
Test Plan Path : templates/AppServ-TestRepository/Phase1/AppServ-Installation
Test Case Link : https://dev.azure.com/itron/SoftwareProducts/_workitems/edit/1993222
===================================================================================================

Description    : Security:CMDNotAsroot
Area Path      : RnD/GFW-IVV/DI Outcomes/APP-Serve
Iteration Path : RnD/3 Week
System.History : None
Steps:
===================================================================================================
Step 1 -
Check that whether CMD is running as non root or not. 
# ps | grep -i containerManager | grep -v grep
31052 containe 15716 S    ContainerManager --username=containerd_u --groupname=containerd_g

Step 2 - 
CMD always should run as non root user in the system


"""
import pytest

# AUTOGENERATED Test Case 1993222
#@pytest.mark.skip(reason="TODO: unimplemented test case")
@pytest.mark.regress_nightly
#@pytest.mark.regress_smoke
@pytest.mark.suite_id("1993280")
@pytest.mark.test_case("1993222")
def test_case(preinstalled_meter, logger, di_version):
    logger.trace("Executing Test Case 1993222 - Security:CMDNotAsroot")
    logger.trace('Step 1')
    container_Manager=preinstalled_meter.command("ps | grep ContainerManager")
    logger.trace('Step 2')
    container_Manager_output = [x.split()[1] for x in container_Manager if('ContainerManager' in x.split()[4])]
    assert container_Manager_output[0] !='root', "container_Manager is running as root "

