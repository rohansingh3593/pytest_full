
"""
REGENRATE: True
Set REGENERATE to False if you modify this comment
section to inhibit re-writing this section
===================================================================================================
Test Plan Path : templates/AppServ-TestRepository/Phase1/AppServ-Installation
Test Case Link : https://dev.azure.com/itron/SoftwareProducts/_workitems/edit/1993220
===================================================================================================
Test Case      : 1993220
Description    : CMHearbeat
Area Path      : RnD/GFW-IVV/DI Outcomes/APP-Serve
Iteration Path : RnD/3 Week
System.History : None
Steps:
===================================================================================================
Step 1 - 
Run Dbus HeartBeat command on the system. dbus-send --print-reply --system
--dest=com.itron.museplatform.ContainerManager /com/itron/museplatform/ContainerManager
com.itron.museplatform.ContainerManager.Heartbeat

Step 2 - 
In reply one should see the \'ok\' string from the CMD


===================================================================================================


"""
import pytest
from tests.test_meters.rohan_utils import absolute_command

# AUTOGENERATED Test Case 1993220

# @pytest.mark.skip(reason="TODO: unimplemented test case")
@pytest.mark.regress_nightly
@pytest.mark.regress_smoke
@pytest.mark.suite_id("1993280")
@pytest.mark.test_case("1993220")
def test_case(preinstalled_meter, logger):
    logger.trace("Executing Test Case 1993220 - CMHearbeat")

    logger.trace('Step 1')
    cmd = 'dbus-send --print-reply --system --dest=com.itron.museplatform.ContainerManager /com/itron/museplatform/ContainerManager com.itron.museplatform.ContainerManager.Heartbeat'
    cmd_out = ''.join(absolute_command(preinstalled_meter,cmd))
    logger.trace('Step 2')
    assert 'Ok' in cmd_out



